---
python: "2.7"
sudo: required
dist: trusty
addons:
  postgresql: "9.3"

services:
  - postgresql

install:
  # Install Ansible.
  - sudo pip install ansible
  - export PSQL_DATA_PATH=`psql -t -P format=unaligned -c "SHOW data_directory;"`

script:
  # Check the role/playbook's syntax.
  - sudo ansible-playbook -i "localhost," galaxy.yml --syntax-check
  - sudo ansible-playbook -i "localhost," -c local --extra-vars "supervisor_postgres_database_path=$PSQL_DATA_PATH" -vvvv galaxy.yml
