#sudo ansible-playbook -i /home/fabiorjvieira/Cloud/GitHub/general/Ansible/ansible_hosts /home/fabiorjvieira/Cloud/GitHub/general/Ansible/test.yml

- hosts: ARTiMED_host_servers
  remote_user: root
  sudo: yes

  vars:
    local_home: "{{ lookup('env','HOME') }}"
    vm_dir: galaxy_install
    vagrant_package: vagrant
    virtualbox_package: virtualbox
    vagrant_box: https://dl.dropboxusercontent.com/u/3523744/boxes/debian-8.1-amd64-lxc-puppet/debian-8.1-lxc-puppet.box
    vagrant_file: Vagrantfile
    
  tasks:
  - name: install vagrant on Debian
    apt: pkg={{ vagrant_package }} state=latest update_cache=yes
    when: ansible_os_family == "Debian"
    register: vagrant_result

  - shell: echo "{{ vagrant_result }}" > ./result.output
    when: vagrant_result | success

  - shell: rm ./result.output
    when: vagrant_result | failed
#  - shell: echo "abc" >> ./result.output; echo "cde"
#    when: vagrant_result.stderr_lines == "" 